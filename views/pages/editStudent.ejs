<body>
  <div id="prefContainer">
		<form action="#" method="post">
			<p>
				<label for="username">Username</label>
				<input id="username" name="username" type="text">
				<span class="right">Enter username longer than 5 characters</span>
			</p>
			<p>
				<label for="password">Password</label>
				<span class="left">Enter a password with at least one capital letter (A-Z), one lowercase letter (a-z) and one number (0-9).</span>
				<input id="password" name="password" type="password">
				<span class="right">Enter a password longer than 8 characters</span>
			</p>
			<p>
				<label for="confirm_password">Confirm Password</label>
				<input id="confirm_password" name="confirm_password" type="password">
				<span class="right">Please confirm your password</span>
			</p>
			<p>
				<input type="submit" value="Save" id="submit">
			</p>
		</form>
  </div>
		<script src="http://code.jquery.com/jquery-1.11.0.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/app.js" type="text/javascript" charset="utf-8"></script>

    <style>
    #prefContainer {
      height:100%;
      width:100%;
    	/*background: #384047;*/
    	/*font-family: sans-serif;*/
    	font-size: 10px
    }

    form {
    	background: #fff;
    	padding: 4em 4em 2em;
    	max-width: 400px;
    	margin: 100px auto 0;
    	box-shadow: 0 0 1em #222;
    	border-radius: 5px;
    }

    p {
    	margin: 0 0 3em 0;
    	position: relative;
    }

    label {
    	display: block;
    	font-size: 1.6em;
    	margin: 0 0 .5em;
    	color: #333;
    }

    input {
    	display: block;
    	box-sizing: border-box;
    	width: 100%;
    	outline: none
    }

    input[type="text"],
    input[type="password"] {
    	background: #f5f5f5;
    	border: 1px solid #e5e5e5;
    	font-size: 1.6em;
    	padding: .8em .5em;
    	border-radius: 5px;
    }

    input[type="text"]:focus,
    input[type="password"]:focus {
    	background: #fff
    }

    .left,
    .right {
    	border-radius: 5px;
    	display: block;
    	font-size: 1.3em;
    	text-align: center;
    	position: absolute;
    	background: #2F558E;
    	padding: 7px 10px;
    	color: #fff;
    }

    .left {
    	left: -60%;
    	top: 18px;
    	width: 200px;
    }

    .right {
    	left: 105%;
    	top: 25px;
    	width: 160px;
    }

    .left:after,
    .right:after {
    	border: solid transparent;
    	content: " ";
    	height: 0;
    	width: 0;
    	position: absolute;
    	top: 50%;
    	pointer-events: none;
    	border-color: rgba(136, 183, 213, 0);
    	border-width: 8px;
    	margin-top: -8px;
    }

    .right:after {
    	right: 100%;
    	border-right-color: #2F558E;
    }

    .left:after {
    	left: 100%;
    	border-left-color: #2F558E;
    }

    input[type="submit"] {
    	background: #2F558E;
    	box-shadow: 0 3px 0 0 #1D3C6A;
    	border-radius: 5px;
    	border: none;
    	color: #fff;
    	cursor: pointer;
    	display: block;
    	font-size: 2em;
    	line-height: 1.6em;
    	margin: 2em 0 0;
    	outline: none;
    	padding: .8em 0;
    	text-shadow: 0 1px #68B25B;
    }
    </style>

    <script>
    var $password = $("#password");
    var $confirmPassword = $("#confirm_password");
    var $username = $("#username");

    //hide hints
    $("form span").hide();

    function isPasswordValidLength() {
    	var validated = true;
    	if ($password.val().length < 9)
    		validated = false;
    	return validated;
    }

    function isPasswordValidName() {
    	var validated = true;
    	if (!/\d/.test($password.val()))
    		validated = false;
    	if(!/[a-z]/.test($password.val()))
    		validated = false;
    	if(!/[A-Z]/.test($password.val()))
    		validated = false;
    	if(/[^0-9a-zA-Z]/.test($password.val()))
    		validated = false;
    	return validated;
    }

    function arePasswordsMatching() {
    	return $password.val() === $confirmPassword.val();
    }

    function isUsernameValid() {
    	return $username.val().length > 5;
    }

    function canSubmit() {
    	return isPasswordValidLength() && isPasswordValidName() && arePasswordsMatching() && isUsernameValid();
    }

    function passwordEvent() {
    	//find out if password is valid
    	if (isPasswordValidLength()) {
    		//hide hint if valid
    		$password.next().hide();
    	} else {
    		//else show hint
    		$password.next().show();
    	}
    	if (isPasswordValidName()) {
    		//hide hint if valid
    		$password.prev().hide();
    	} else {
    		//else show hint
    		$password.prev().show();
    	}
    }

    function confirmPasswordEvent() {
    	//find out if password and confirmation match
    	if (arePasswordsMatching()) {
    		//hide hint if matched
    		$confirmPassword.next().hide();
    	} else {
    		//else show hint
    		$confirmPassword.next().show();
    	}
    }

    function usernameEvent() {
    	//find out if username is valid
    	if (isUsernameValid()) {
    		//hide hint if valid
    		$username.next().hide();
    	} else {
    		//else show hint
    		$username.next().show();
    	}
    }

    function enableSubmitEvent() {
    	$("#submit").prop("disabled", !canSubmit());
    }

    //when event happens on password input
    $password.focus(passwordEvent)
    	.keyup(passwordEvent)
    	.keyup(confirmPasswordEvent)
    	.keyup(enableSubmitEvent);


    //when event happens on confirmation input
    $confirmPassword.focus(confirmPasswordEvent)
    	.keyup(confirmPasswordEvent)
    	.keyup(enableSubmitEvent);

    //when event happens on username input
    $username.focus(usernameEvent)
    	.keyup(usernameEvent)
    	.keyup(enableSubmitEvent);

    enableSubmitEvent();
    </script>

	</body>
